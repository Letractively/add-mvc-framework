#summary ADD MVC Controllers
#labels Phase-Design
= Introduction =
Pages are created through controllers. It is stored inside classes/ folder of the application.

Controllers are classes that represents the page/resource. execute() ( formerly page() ) are called on this functions which calls process_data() ( formerly process() ) and print_response().

on the main execution file (eg. add.php) add::current_controller() is called and it's execute() function. add::current_controller() returns the instance of the current controller according to the current url path.

----------

In simple terms, it is the classes that contain the PHP codes for the pages.

ADD MVC controllers has [modesAndSubModes Modes and Sub Modes] that enables code isolation for different modes and/or actions. And GPC(or global) variable registration system.

Pages are created through controllers. It is stored inside classes/ folder of the application.


= Default Controller Classes =
 * ctrl_page_index - default homepage
 * ctrl_page_404 - default 404 page

= Abstract Controller Classes =
 * ctrl_tpl_page - for normal html pages
 * ctrl_tpl_ajax - for ajax resources
 * ctrl_tpl_aux - for auxiliary controllers


=== Controller Methods ===

https://add-mvc-framework.googlecode.com/svn/wiki/assets/images/add-controller.png

 # execute() - the root method of the controller this function calls by default process_data() and print_response() and is called in your [gettingStarted#Main_Execution_File Main Execution File]. For best practice this method should not be extended.
   # `process_data()` - this method should contain the data processing of the controller. By default, this calls process_mode()
      # `pre_mode_process()` (version 0.9) - To be extended to add a process *before* the processing of the `$_REQUEST['mode']`
      # process_mode() - Creates an array of registered gpc. Calls the applicable `process_mode_$_REQUEST['mode']`($gpc). For best practice this method should not be extended
      # post_mode_process() (version 0.9) - To be extended to add a process *after* the processing of the `$_REQUEST['mode']`
   # `print_response($data)` - prints the view. For best practice this method should not be extended
 # assign($field,$value) - assigns a data to the controller. This will also automatically call `smarty assign()` for the view.

=== Modes and Sub Modes ===

ADD MVC has built in support for actions or modes (for consistency, we will call these "modes") of pages/resources (for consistency we will call these "resources").

Modes are further discussed on this page: [modesAndSubModes Modes and Sub Modes]

=Examples=
demos/trunk/simple/includes/classes/ctrl_page_login.class.php
{{{
<?php
/**
 * Login controller demo
 */
CLASS ctrl_page_login EXTENDS ctrl_tpl_page {

   /**
    * Login Request variables - username and password from $_REQUEST
    *
    */
   protected $mode_gpc_login = array( '_REQUEST' => array( 'username', 'password' ));

   /**
    * Login
    *
    * @param array $gpc - contains $gpc['username'] and $gpc['password']
    *
    */
   public function process_mode_login($gpc) {

      # validation on controller
      if (empty($gpc['username'])) {
         throw new e_user_input("Blank username");
      }
      if (empty($gpc['password'])) {
         throw new e_user_input("Blank password");
      }

      # login the session user class
      member::login($gpc['username'],$gpc['password']);
   }



   /**
    * Logout request variables - none
    *
    */
   protected $mode_gpc_logout = array();
   /**
    * Logout mode
    *
    * @param array $gpc - blank array
    *
    */
   public function process_mode_logout($gpc) {
      member::logout();
   }

}
}}}